
/* cytoscape.layout.breadthfirst.min.js */

/**
 * This file is part of cytoscape.js 2.0.2.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
(function(a){var b={fit:true,ready:undefined,stop:undefined,directed:true,padding:30,circle:false,roots:undefined};function c(d){this.options=a.util.extend({},b,d)}c.prototype.run=function(){var K=this.options;var m=K;var j=K.cy;var C=j.nodes();var g=j.edges();var x=j.container();var B=x.clientWidth;var z=x.clientHeight;var n;if(a.is.elementOrCollection(m.roots)){n=m.roots}else{if(a.is.array(m.roots)){var F=[];for(var G=0;G<m.roots.length;G++){var A=m.roots[G];var v=j.getElementById(A);n.push(v)}n=new a.Collection(j,F)
}else{n=C.roots()}}var p=[];var l={};var o={};n.bfs(function(h,N){var w=this[0];if(!p[N]){p[N]=[]}p[N].push(w);l[w.id()]=true;o[w.id()]=N},m.directed);var J=[];for(var G=0;G<C.length;G++){var v=C[G];if(l[v.id()]){continue}else{J.push(v)}}var f=J.length*3;var d=0;while(J.length!==0&&d<f){var E=J.shift();var D=E.neighborhood().nodes();var I=false;for(var G=0;G<D.length;G++){var M=o[D[G].id()];if(M!==undefined){p[M].push(E);I=true;break}}if(!I){J.push(E)}d++}while(J.length!==0){var E=J.shift();var q=E.bfs();
var I=false;for(var G=0;G<q.length;G++){var M=o[q[G].id()];if(M!==undefined){p[M].push(E);I=true;break}}if(!I){if(p.length===0){p.push([])}p[0].push(E)}}function k(){for(var N=0;N<p.length;N++){var h=p[N];for(var w=0;w<h.length;w++){var O=h[w];O._private.scratch.BreadthFirstLayout={depth:N,index:w}}}}k();var y=0;for(var G=0;G<C.length;G++){var u=C[G].outerWidth();var H=C[G].outerHeight();y=Math.max(y,u,H)}y*=1.75;var e={};function t(V){if(e[V.id()]){return e[V.id()]}var N=V._private.scratch.BreadthFirstLayout.depth;
var U=V.neighborhood().nodes();var P=0;var Q=0;for(var w=0;w<U.length;w++){var S=U[w];var R=S.edgesWith(V);var O=S._private.scratch.BreadthFirstLayout.index;var h=S._private.scratch.BreadthFirstLayout.depth;var T=p[h].length;if(N>h||N===0){P+=O/T;Q++}}Q=Math.max(1,Q);P=P/Q;if(Q===0){P=undefined}e[V.id()]=P;return P}for(var s=0;s<3;s++){for(var G=0;G<p.length;G++){var M=G;var r=[];p[G]=p[G].sort(function(i,h){var w=t(i);var N=t(h);return w-N})}k()}var L={x:B/2,y:z/2};C.positions(function(){var S=this[0];
var i=S._private.scratch.BreadthFirstLayout;var w=i.depth;var N=i.index;var R=Math.max(B/(p[w].length+1),y);var Q=Math.max(z/(p.length+1),y);var P=Math.min(B/2/p.length,z/2/p.length);P=Math.max(P,y);if(m.circle){var O=P*w+P-(p.length>0&&p[0].length<=3?P/2:0);var h=2*Math.PI/p[w].length*N;if(w===0&&p[0].length===1){O=1}return{x:L.x+O*Math.cos(h),y:L.y+O*Math.sin(h)}}else{return{x:(N+1)*R,y:(w+1)*Q}}});if(K.fit){j.fit(m.padding)}j.one("layoutready",K.ready);j.trigger("layoutready");j.one("layoutstop",K.stop);
j.trigger("layoutstop")};c.prototype.stop=function(){};a("layout","breadthfirst",c)})(cytoscape);